#include <iostream>
#include <string_view>
#include <unistd.h>

// Never called
void callme() {
    system("/bin/sh");
    asm volatile (
      "pop %rdi\n"
      "ret");
}

void auth() {
    char requiredPassword[] = {"1111111111"};
    char enteredPassword[10] = {0};

    std::cout << "Enter a password: " << std::endl;

    // WARNING, UNSAFE!
    read(0, enteredPassword, 200);

    if (std::string_view(requiredPassword) == enteredPassword) {
        std::cout << "SUCCESS" << std::endl;
    } else {
        std::cout << "FAILED" << std::endl;
    }
    std::cout << "Entered password: " << enteredPassword << std::endl;
    std::cout << "Required password: " << requiredPassword << std::endl;
}

int main(int argc, char *argv[]) {
    auth();
    return 0;
}